{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\itswa\\\\Desktop\\\\FINALPROJ\\\\COMP3851\\\\PROJECT\\\\frontend\\\\src\\\\components\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { login } from '../store/actions/authActions';\nimport axios from 'axios';\nimport { Link, useLocation } from 'react-router-dom';\nimport { Button, Container, Navbar, Form } from 'react-bootstrap';\nimport { LinkContainer, Row, Column } from \"react-router-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet config = {\n  headers: {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json'\n  }\n};\n\nconst Login = () => {\n  _s();\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const location = useLocation();\n  const dispatch = useDispatch();\n  let loginType = location.search.replace(\"?type=\", \"\");\n  if (!loginType || ![\"admin\", \"user\"].includes(loginType)) loginType = \"user\";\n\n  const submitHandler = async e => {\n    e.preventDefault();\n    setError(\"\");\n\n    try {\n      const body = JSON.stringify({\n        email,\n        password\n      });\n      let res = await axios.post('/api/login/' + loginType, body, config);\n      dispatch(login({ ...res.data,\n        role: loginType\n      }));\n    } catch (err) {\n      let {\n        status\n      } = err.response;\n      if (status === 400) return setError(\"Wrong credentials!\");\n      setError(\"Oops, try again!\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      bg: \"dark\",\n      variant: \"dark\",\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(LinkContainer, {\n          to: \"/\",\n          children: /*#__PURE__*/_jsxDEV(Navbar.Brand, {\n            children: \"University Of Newcastle - Program Advisory Tool\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: submitHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"bigHeader\",\n          children: \"University of Newcastle's Program Advisory Tool Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"subHeader\",\n          children: [\"Welcome back! Login to your \", loginType, \" account!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          controlId: \"formBasicEmail\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Email address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"email\",\n            placeholder: \"Enter email\",\n            onChange: e => setEmail(e.currentTarget.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          controlId: \"formBasicPassword\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"password\",\n            placeholder: \"Password\",\n            onChange: e => setPassword(e.currentTarget.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"You're \", loginType === \"admin\" ? \"a user?\" : \"an admin?\", /*#__PURE__*/_jsxDEV(LinkContainer, {\n            to: \"/login?type=\" + (loginType === \"admin\" ? \"user\" : \"admin\"),\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"link\",\n              children: \"SIGN IN HERE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"t2UPMEuq/1w7keh6hGqkp0rEAgI=\", false, function () {\n  return [useLocation, useDispatch];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/itswa/Desktop/FINALPROJ/COMP3851/PROJECT/frontend/src/components/Login.js"],"names":["React","useState","useDispatch","login","axios","Link","useLocation","Button","Container","Navbar","Form","LinkContainer","Row","Column","config","headers","Login","email","setEmail","password","setPassword","error","setError","location","dispatch","loginType","search","replace","includes","submitHandler","e","preventDefault","body","JSON","stringify","res","post","data","role","err","status","response","currentTarget","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { login } from '../store/actions/authActions';\nimport axios from 'axios';\nimport { Link, useLocation } from 'react-router-dom';\nimport { Button, Container, Navbar, Form } from 'react-bootstrap';\nimport { LinkContainer, Row, Column } from \"react-router-bootstrap\";\n\n\n\nlet config = { \n    headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json' \n    }\n}\n\nconst Login = () => {\n\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n\n    const location = useLocation();\n    const dispatch = useDispatch();\n\n    let loginType = location.search.replace(\"?type=\", \"\");\n\n    if(!loginType || ![\"admin\", \"user\"].includes(loginType))\n        loginType = \"user\"\n\n    const submitHandler = async (e) => {\n        e.preventDefault();\n        setError(\"\");\n        try{\n            const body = JSON.stringify({email, password})\n            let res = await axios.post('/api/login/' + loginType, body, config);\n            dispatch(login({...res.data, role: loginType}))\n        }catch(err){\n            let { status } = err.response;\n            if(status === 400)\n                return setError(\"Wrong credentials!\")\n\n            setError(\"Oops, try again!\")\n        }\n    }\n\n    return (\n        <div >\n            <Navbar bg=\"dark\" variant=\"dark\">\n                <Container>\n                    <LinkContainer to=\"/\">\n                        <Navbar.Brand>University Of Newcastle - Program Advisory Tool</Navbar.Brand>\n                    </LinkContainer>\n                </Container>\n            </Navbar>\n\n\n            <Container>\n                <Form onSubmit={submitHandler}>\n                    <h1 className=\"bigHeader\">University of Newcastle's Program Advisory Tool Login</h1>\n\n                    <h2 className=\"subHeader\">Welcome back! Login to your {loginType} account!</h2>\n\n                    <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\n                        <Form.Label>Email address</Form.Label>\n                        <Form.Control type=\"email\" placeholder=\"Enter email\" onChange={(e) => setEmail(e.currentTarget.value)} required/>\n                    </Form.Group>\n\n                    <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\n                        <Form.Label>Password</Form.Label>\n                        <Form.Control type=\"password\" placeholder=\"Password\" onChange={(e) => setPassword(e.currentTarget.value)} required/>\n                    </Form.Group>\n\n                    <p>You're {loginType === \"admin\" ? \"a user?\" : \"an admin?\"}\n\n                    <LinkContainer to={\"/login?type=\" + (loginType === \"admin\" ? \"user\" : \"admin\")}>\n                            <Button variant=\"link\">SIGN IN HERE</Button>\n                        </LinkContainer>\n\n                    </p>\n\n                    {error && <p>{error}</p>}\n\n                    <Button variant=\"primary\" type=\"submit\">\n                        Submit\n                    </Button>\n                </Form>\n            </Container>\n        </div>\n    )\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}