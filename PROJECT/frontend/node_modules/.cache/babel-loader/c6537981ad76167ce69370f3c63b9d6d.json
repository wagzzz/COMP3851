{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\itswa\\\\Desktop\\\\final\\\\frontend\\\\src\\\\components\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { login } from '../store/actions/authActions';\nimport axios from 'axios';\nimport { Link, useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet config = {\n  headers: {\n    'Accept': 'application/json',\n    'Content-Type': 'application/json'\n  }\n};\n\nconst Login = () => {\n  _s();\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const location = useLocation();\n  const dispatch = useDispatch();\n  let loginType = location.search.replace(\"?type=\", \"\");\n  if (!loginType || ![\"admin\", \"user\"].includes(loginType)) loginType = \"user\";\n\n  const submitHandler = async e => {\n    e.preventDefault();\n    setError(\"\");\n\n    try {\n      const body = JSON.stringify({\n        email,\n        password\n      });\n      let res = await axios.post('/api/login/' + loginType, body, config);\n      dispatch(login(res.data));\n    } catch (err) {\n      let {\n        status\n      } = err.response;\n      if (status === 400) return setError(\"Wrong credentials!\");\n      setError(\"Oops, try again!\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Home Page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitHandler,\n      className: \"form-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Welcome\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Welcome back! Login to your \", loginType, \" account!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            placeholder: \"Email Address\",\n            value: email,\n            onChange: e => setEmail(e.currentTarget.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"Password\",\n            required: true,\n            minLength: 6,\n            onChange: e => setPassword(e.currentTarget.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"You're \", loginType === \"admin\" ? \"a user\" : \"an admin\", \"?\", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login?type=\" + (loginType === \"admin\" ? \"user\" : \"admin\"),\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Sign In from here!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Don\\u2019t Have an account?\", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Sign Up Now!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"t2UPMEuq/1w7keh6hGqkp0rEAgI=\", false, function () {\n  return [useLocation, useDispatch];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/itswa/Desktop/final/frontend/src/components/Login.js"],"names":["React","useState","useDispatch","login","axios","Link","useLocation","config","headers","Login","email","setEmail","password","setPassword","error","setError","location","dispatch","loginType","search","replace","includes","submitHandler","e","preventDefault","body","JSON","stringify","res","post","data","err","status","response","currentTarget","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { login } from '../store/actions/authActions';\nimport axios from 'axios';\nimport { Link, useLocation } from 'react-router-dom';\n\n\nlet config = { \n    headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json' \n    }\n}\n\nconst Login = () => {\n\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [error, setError] = useState('');\n\n    const location = useLocation();\n    const dispatch = useDispatch();\n\n    let loginType = location.search.replace(\"?type=\", \"\");\n\n    if(!loginType || ![\"admin\", \"user\"].includes(loginType))\n        loginType = \"user\"\n\n    const submitHandler = async (e) => {\n        e.preventDefault();\n        setError(\"\");\n        try{\n            const body = JSON.stringify({email, password})\n            let res = await axios.post('/api/login/' + loginType, body, config);\n            dispatch(login(res.data))\n        }catch(err){\n            let { status } = err.response;\n            if(status === 400)\n                return setError(\"Wrong credentials!\")\n\n            setError(\"Oops, try again!\")\n        }\n    }\n\n    return (\n        <div >\n            <div>\n                <Link to=\"/\">\n                    <h1>Home Page</h1>\n                </Link>\n            </div>\n\n            <form onSubmit={submitHandler} className=\"form-group\">\n\n                <h2>Welcome</h2>\n\n                <p>Welcome back! Login to your {loginType} account!</p>\n\n                <div>\n                    <div>\n                        <input type=\"email\" placeholder=\"Email Address\" \n                        value={email} onChange={(e) => setEmail(e.currentTarget.value)}  required />\n                    </div>\n                </div>\n\n                <div>\n                    <div>\n                        <input type=\"password\" placeholder=\"Password\" required minLength={6}\n                        onChange={(e) => setPassword(e.currentTarget.value)}  />\n                    </div>\n                </div>\n\n                <p>You're {loginType === \"admin\" ? \"a user\" : \"an admin\"}?\n\n                    <Link to={\"/login?type=\" + (loginType === \"admin\" ? \"user\" : \"admin\")}>\n                        <span>Sign In from here!</span>\n                    </Link>\n\n                </p>\n\n                {error && <p>{error}</p>}\n                <button >Login</button>\n\n                \n                <p>Donâ€™t Have an account?\n                    <Link to=\"/register\">\n                        <span>Sign Up Now!</span>\n                    </Link>\n                </p>\n\n            </form>\n        </div>\n    )\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}