{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar react_bootstrap_1 = require(\"react-bootstrap\");\n\nvar Prompts_1 = require(\"./Prompts\");\n\nvar PromptInput_1 = __importDefault(require(\"./PromptInput\"));\n\nvar DialogAction_1 = __importDefault(require(\"./DialogAction\")); // XXX: Check current ReactBootstrap v4 later, or not.\n\n\nvar isLaterV4 = function () {\n  var anyModal = react_bootstrap_1.Modal; // eslint-disable-line @typescript-eslint/no-explicit-any\n\n  return !anyModal.childContextTypes;\n}();\n/**\n * The modal dialog which can be altenative to `window.confirm` and `window.alert`.\n * @example <Dialog ref={(el) => {this.dialog = el} />\n * @example this.dialog.show({body: 'Hello!', actions: [Dialog.Action('do', () => console.log('ok'))]})\n * @example this.dialog.showAlert('Hello!')\n */\n\n\nvar Dialog = function (_super) {\n  __extends(Dialog, _super);\n\n  function Dialog(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.promptInput = null;\n    _this.keyBinds = {};\n    _this.state = Dialog.initialState();\n    _this.onHide = _this.onHide.bind(_this);\n    _this.onSubmitPrompt = _this.onSubmitPrompt.bind(_this);\n    return _this;\n  }\n  /**\n   * Set default options for applying to all dialogs.\n   * @param options\n   */\n\n\n  Dialog.setOptions = function (options) {\n    Dialog.options = Object.assign({}, Dialog.DEFAULT_OPTIONS, options);\n  };\n  /**\n   * Reset default options to presets.\n   */\n\n\n  Dialog.resetOptions = function () {\n    Dialog.options = Dialog.DEFAULT_OPTIONS;\n  };\n\n  Dialog.initialState = function () {\n    return {\n      title: null,\n      body: null,\n      showModal: false,\n      actions: [],\n      bsSize: undefined,\n      onHide: null,\n      prompt: null\n    };\n  };\n\n  Dialog.prototype.componentWillUnmount = function () {\n    if (this.state.showModal) {\n      this.hide();\n    }\n  };\n  /**\n   * Show dialog with choices. This is similar to `window.confirm`.\n   * @param options Object for dialog options.\n   * @param options.title The title of dialog.\n   * @param options.body The body of message.\n   * @param options.actions {DialogAction} The choices for presenting to user.\n   * @param options.bsSize {[null, 'medium', 'large', 'small']} The width size for dialog.\n   * @param options.onHide {function} The method to call when the dialog was closed by clicking background.\n   * @param options.prompt {[null, Prompt]} Use prompt for text input or password input.\n   */\n\n\n  Dialog.prototype.show = function (options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var keyBinds = {};\n    var newOptions = Object.assign({}, options);\n    var actions = newOptions.actions,\n        prompt = newOptions.prompt; // If has prompt and click button assigned enter key,\n    // Execute validation at first.\n\n    if (actions && prompt) {\n      newOptions.actions = actions.map(function (action) {\n        var key = action.key;\n\n        if (!(key && key.includes('enter'))) {\n          // Not enter button, so return\n          return action;\n        } // It's enter button, let's validate\n\n\n        var newAction = Object.assign({}, action);\n\n        newAction.func = function (dialog) {\n          if (!(dialog.promptInput && dialog.promptInput.checkValidity())) {\n            return false;\n          }\n\n          action.func(_this);\n        };\n\n        return newAction;\n      });\n    } // Setup key binds\n\n\n    newOptions.actions && newOptions.actions.forEach(function (action) {\n      if (action.key) {\n        action.key.split(',').forEach(function (key) {\n          keyBinds[key] = function () {\n            action.func(_this);\n          };\n        });\n      }\n    }); // TODO: Add keybinds\n\n    this.keyBinds = keyBinds;\n    this.setState(Object.assign({}, Dialog.initialState(), newOptions, {\n      showModal: true\n    }));\n  };\n  /**\n   * Show message dialog This is similar to `window.alert`.\n   * @param body The body of message.\n   * @param bsSize {[null, 'medium', 'large', 'small']} The width size for dialog.\n   */\n\n\n  Dialog.prototype.showAlert = function (body, bsSize) {\n    if (bsSize === void 0) {\n      bsSize = undefined;\n    }\n\n    var options = {\n      body: body,\n      actions: [Dialog.SingleOKAction()],\n      bsSize: bsSize\n    };\n    this.show(options);\n  };\n\n  Dialog.prototype.onHide = function () {\n    var onHide = this.state.onHide;\n\n    if (typeof onHide === 'function') {\n      onHide(this);\n    } else {\n      this.hide();\n    }\n  };\n  /**\n   * Hide this dialog.\n   */\n\n\n  Dialog.prototype.hide = function () {\n    if (!this.state.showModal) return; // TODO: Remove keybinds\n\n    this.setState({\n      showModal: false\n    });\n  };\n\n  Object.defineProperty(Dialog.prototype, \"value\", {\n    /**\n     * Get the value in prompt.\n     * @return {string, null}\n     */\n    get: function () {\n      if (this.promptInput) {\n        return this.promptInput.value;\n      }\n\n      return null;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Dialog.prototype.onSubmitPrompt = function () {\n    var action = this.keyBinds && this.keyBinds['enter'];\n    action && action();\n  };\n\n  Dialog.prototype.getSize = function (defaultSize) {\n    return typeof this.state.bsSize === 'undefined' ? defaultSize : this.state.bsSize === 'medium' ? null : this.state.bsSize;\n  };\n\n  Dialog.prototype.render = function () {\n    var _this = this;\n\n    var additionalProps = isLaterV4 ? {\n      size: this.getSize('sm')\n    } : {\n      bsSize: this.getSize('small')\n    };\n    return react_1.default.createElement(react_bootstrap_1.Modal, __assign({\n      show: this.state.showModal,\n      onHide: this.onHide\n    }, additionalProps), this.state.title && react_1.default.createElement(react_bootstrap_1.Modal.Header, null, react_1.default.createElement(react_bootstrap_1.Modal.Title, null, this.state.title)), react_1.default.createElement(react_bootstrap_1.Modal.Body, null, typeof this.state.body === 'string' ? react_1.default.createElement(\"p\", null, this.state.body) : this.state.body, this.state.prompt && react_1.default.createElement(PromptInput_1.default, {\n      ref: function (el) {\n        _this.promptInput = el;\n      },\n      prompt: this.state.prompt,\n      onSubmit: this.onSubmitPrompt\n    })), react_1.default.createElement(react_bootstrap_1.Modal.Footer, null, this.state.actions && this.state.actions.map(function (action, index) {\n      return react_1.default.createElement(\"button\", {\n        key: index,\n        type: 'button',\n        className: \"btn btn-sm \" + action.className,\n        onClick: function () {\n          action.func && action.func(_this);\n        },\n        style: {\n          minWidth: 82\n        }\n      }, action.label);\n    })));\n  };\n\n  Dialog.DEFAULT_OPTIONS = {\n    defaultOkLabel: 'OK',\n    defaultCancelLabel: 'Cancel',\n    primaryClassName: 'btn-primary',\n    defaultButtonClassName: 'btn-default btn-outline-secondary'\n  };\n  Dialog.options = Dialog.DEFAULT_OPTIONS;\n\n  Dialog.Action = function (label, func, className, key) {\n    return new DialogAction_1.default(label, func, className, key);\n  };\n\n  Dialog.DefaultAction = function (label, func, className) {\n    return new DialogAction_1.default(label, func, className && className.length > 0 ? className : Dialog.options.primaryClassName, 'enter');\n  };\n\n  Dialog.OKAction = function (func) {\n    return new DialogAction_1.default(Dialog.options.defaultOkLabel, function (dialog) {\n      dialog.hide();\n      func && func(dialog);\n    }, Dialog.options.primaryClassName, 'enter');\n  };\n\n  Dialog.CancelAction = function (func) {\n    return new DialogAction_1.default(Dialog.options.defaultCancelLabel, function (dialog) {\n      dialog.hide();\n      func && func(dialog);\n    }, null, 'esc');\n  };\n\n  Dialog.SingleOKAction = function () {\n    return new DialogAction_1.default(Dialog.options.defaultOkLabel, function (dialog) {\n      dialog.hide();\n    }, Dialog.options.primaryClassName, 'enter,esc');\n  };\n\n  Dialog.TextPrompt = function (options) {\n    return new Prompts_1.TextPrompt(options);\n  };\n\n  Dialog.PasswordPrompt = function (options) {\n    return new Prompts_1.PasswordPrompt(options);\n  };\n\n  Dialog.displayName = 'Dialog';\n  return Dialog;\n}(react_1.default.Component);\n\nexports.default = Dialog;","map":{"version":3,"sources":["../src/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importDefault(require(\"react\"));\nvar react_bootstrap_1 = require(\"react-bootstrap\");\nvar Prompts_1 = require(\"./Prompts\");\nvar PromptInput_1 = __importDefault(require(\"./PromptInput\"));\nvar DialogAction_1 = __importDefault(require(\"./DialogAction\"));\n// XXX: Check current ReactBootstrap v4 later, or not.\nvar isLaterV4 = function () {\n    var anyModal = react_bootstrap_1.Modal; // eslint-disable-line @typescript-eslint/no-explicit-any\n    return !(anyModal.childContextTypes);\n}();\n/**\n * The modal dialog which can be altenative to `window.confirm` and `window.alert`.\n * @example <Dialog ref={(el) => {this.dialog = el} />\n * @example this.dialog.show({body: 'Hello!', actions: [Dialog.Action('do', () => console.log('ok'))]})\n * @example this.dialog.showAlert('Hello!')\n */\nvar Dialog = /** @class */ (function (_super) {\n    __extends(Dialog, _super);\n    function Dialog(props) {\n        var _this = _super.call(this, props) || this;\n        _this.promptInput = null;\n        _this.keyBinds = {};\n        _this.state = Dialog.initialState();\n        _this.onHide = _this.onHide.bind(_this);\n        _this.onSubmitPrompt = _this.onSubmitPrompt.bind(_this);\n        return _this;\n    }\n    /**\n     * Set default options for applying to all dialogs.\n     * @param options\n     */\n    Dialog.setOptions = function (options) {\n        Dialog.options = Object.assign({}, Dialog.DEFAULT_OPTIONS, options);\n    };\n    /**\n     * Reset default options to presets.\n     */\n    Dialog.resetOptions = function () {\n        Dialog.options = Dialog.DEFAULT_OPTIONS;\n    };\n    Dialog.initialState = function () {\n        return {\n            title: null,\n            body: null,\n            showModal: false,\n            actions: [],\n            bsSize: undefined,\n            onHide: null,\n            prompt: null\n        };\n    };\n    Dialog.prototype.componentWillUnmount = function () {\n        if (this.state.showModal) {\n            this.hide();\n        }\n    };\n    /**\n     * Show dialog with choices. This is similar to `window.confirm`.\n     * @param options Object for dialog options.\n     * @param options.title The title of dialog.\n     * @param options.body The body of message.\n     * @param options.actions {DialogAction} The choices for presenting to user.\n     * @param options.bsSize {[null, 'medium', 'large', 'small']} The width size for dialog.\n     * @param options.onHide {function} The method to call when the dialog was closed by clicking background.\n     * @param options.prompt {[null, Prompt]} Use prompt for text input or password input.\n     */\n    Dialog.prototype.show = function (options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        var keyBinds = {};\n        var newOptions = Object.assign({}, options);\n        var actions = newOptions.actions, prompt = newOptions.prompt;\n        // If has prompt and click button assigned enter key,\n        // Execute validation at first.\n        if (actions && prompt) {\n            newOptions.actions = actions.map(function (action) {\n                var key = action.key;\n                if (!(key && key.includes('enter'))) {\n                    // Not enter button, so return\n                    return action;\n                }\n                // It's enter button, let's validate\n                var newAction = Object.assign({}, action);\n                newAction.func = function (dialog) {\n                    if (!(dialog.promptInput && dialog.promptInput.checkValidity())) {\n                        return false;\n                    }\n                    action.func(_this);\n                };\n                return newAction;\n            });\n        }\n        // Setup key binds\n        newOptions.actions && newOptions.actions.forEach(function (action) {\n            if (action.key) {\n                action.key.split(',').forEach(function (key) {\n                    keyBinds[key] = function () { action.func(_this); };\n                });\n            }\n        });\n        // TODO: Add keybinds\n        this.keyBinds = keyBinds;\n        this.setState(Object.assign({}, Dialog.initialState(), newOptions, { showModal: true }));\n    };\n    /**\n     * Show message dialog This is similar to `window.alert`.\n     * @param body The body of message.\n     * @param bsSize {[null, 'medium', 'large', 'small']} The width size for dialog.\n     */\n    Dialog.prototype.showAlert = function (body, bsSize) {\n        if (bsSize === void 0) { bsSize = undefined; }\n        var options = {\n            body: body,\n            actions: [\n                Dialog.SingleOKAction()\n            ],\n            bsSize: bsSize\n        };\n        this.show(options);\n    };\n    Dialog.prototype.onHide = function () {\n        var onHide = this.state.onHide;\n        if (typeof onHide === 'function') {\n            onHide(this);\n        }\n        else {\n            this.hide();\n        }\n    };\n    /**\n     * Hide this dialog.\n     */\n    Dialog.prototype.hide = function () {\n        if (!this.state.showModal)\n            return;\n        // TODO: Remove keybinds\n        this.setState({ showModal: false });\n    };\n    Object.defineProperty(Dialog.prototype, \"value\", {\n        /**\n         * Get the value in prompt.\n         * @return {string, null}\n         */\n        get: function () {\n            if (this.promptInput) {\n                return this.promptInput.value;\n            }\n            return null;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Dialog.prototype.onSubmitPrompt = function () {\n        var action = this.keyBinds && this.keyBinds['enter'];\n        action && action();\n    };\n    Dialog.prototype.getSize = function (defaultSize) {\n        return (typeof this.state.bsSize) === 'undefined' ? defaultSize : (this.state.bsSize === 'medium' ? null : this.state.bsSize);\n    };\n    Dialog.prototype.render = function () {\n        var _this = this;\n        var additionalProps = (isLaterV4 ? {\n            size: this.getSize('sm')\n        } : {\n            bsSize: this.getSize('small')\n        });\n        return (react_1.default.createElement(react_bootstrap_1.Modal, __assign({ show: this.state.showModal, onHide: this.onHide }, additionalProps),\n            this.state.title && (react_1.default.createElement(react_bootstrap_1.Modal.Header, null,\n                react_1.default.createElement(react_bootstrap_1.Modal.Title, null, this.state.title))),\n            react_1.default.createElement(react_bootstrap_1.Modal.Body, null,\n                typeof this.state.body === 'string'\n                    ? (react_1.default.createElement(\"p\", null, this.state.body))\n                    : this.state.body,\n                this.state.prompt && (react_1.default.createElement(PromptInput_1.default, { ref: function (el) { _this.promptInput = el; }, prompt: this.state.prompt, onSubmit: this.onSubmitPrompt }))),\n            react_1.default.createElement(react_bootstrap_1.Modal.Footer, null, this.state.actions && this.state.actions.map(function (action, index) {\n                return (react_1.default.createElement(\"button\", { key: index, type: 'button', className: \"btn btn-sm \" + action.className, onClick: function () { action.func && action.func(_this); }, style: { minWidth: 82 } }, action.label));\n            }))));\n    };\n    Dialog.DEFAULT_OPTIONS = {\n        defaultOkLabel: 'OK',\n        defaultCancelLabel: 'Cancel',\n        primaryClassName: 'btn-primary',\n        defaultButtonClassName: 'btn-default btn-outline-secondary'\n    };\n    Dialog.options = Dialog.DEFAULT_OPTIONS;\n    Dialog.Action = function (label, func, className, key) { return new DialogAction_1.default(label, func, className, key); };\n    Dialog.DefaultAction = function (label, func, className) { return new DialogAction_1.default(label, func, className && className.length > 0 ? className : Dialog.options.primaryClassName, 'enter'); };\n    Dialog.OKAction = function (func) { return new DialogAction_1.default(Dialog.options.defaultOkLabel, function (dialog) { dialog.hide(); func && func(dialog); }, Dialog.options.primaryClassName, 'enter'); };\n    Dialog.CancelAction = function (func) { return new DialogAction_1.default(Dialog.options.defaultCancelLabel, function (dialog) { dialog.hide(); func && func(dialog); }, null, 'esc'); };\n    Dialog.SingleOKAction = function () { return new DialogAction_1.default(Dialog.options.defaultOkLabel, function (dialog) { dialog.hide(); }, Dialog.options.primaryClassName, 'enter,esc'); };\n    Dialog.TextPrompt = function (options) { return new Prompts_1.TextPrompt(options); };\n    Dialog.PasswordPrompt = function (options) { return new Prompts_1.PasswordPrompt(options); };\n    Dialog.displayName = 'Dialog';\n    return Dialog;\n}(react_1.default.Component));\nexports.default = Dialog;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}